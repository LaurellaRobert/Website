<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" href="favicon.png">
  <title>Robert Laurella</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      min-height: 100vh;
      height: 100vh;
      overflow: hidden;
    }
    .content {
      flex: 0 0 65%;
      max-width: none;
      padding: 0;
      text-align: left;
      display: flex;
      flex-direction: column;
      justify-content: center;
      overflow-y: auto;
    }
    .content-inner {
      width: 85%;
      max-width: 85%;
      margin: 0 auto;
      padding: 40px 40px;
      display: flex;
      flex-direction: column;
      height: 100%;
    }
    .content-header {
      position: sticky;
      top: 0;
      background: inherit;
      z-index: 100;
      padding-bottom: 10px;
    }
    .content-inner h1 {
      margin-top: 0;
      margin-bottom: 15px;
    }
    .content-inner p {
      margin-top: 0;
      line-height: 1.6;
    }
    .tab-content-wrapper {
      flex: 1;
      position: relative;
      padding-top: 10px;
      width: 100%;
      max-width: 100%;
    }
    .animation-panel {
      flex: 0 0 35%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #f9f9f9;
      min-height: 100vh;
      position: sticky;
      top: 0;
    }
    .social-links {
      margin-top: 20px;
      display: flex;
      gap: 20px;
    }
    .social-links a {
      color: #333;
      transition: opacity 0.2s;
    }
    .social-links a:hover {
      opacity: 0.6;
    }
    .social-links svg {
      width: 24px;
      height: 24px;
    }
    /* Tab navigation */
    .tab-nav {
      display: flex;
      gap: 0;
      margin-bottom: 25px;
      border-bottom: 2px solid #e0e0e0;
    }
    .tab-button {
      background: none;
      border: none;
      padding: 10px 20px;
      cursor: pointer;
      font-size: 14px;
      color: #666;
      transition: all 0.3s ease;
      border-bottom: 2px solid transparent;
      margin-bottom: -2px;
      font-weight: 500;
    }
    .tab-button:hover {
      color: #333;
    }
    .tab-button.active {
      color: #333;
      border-bottom-color: #333;
    }
    .tab-content {
      position: absolute;
      top: 10px;
      left: 0;
      right: 0;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s ease, visibility 0.2s ease;
      overflow-y: auto;
      height: calc(100% - 10px);
      width: 100%;
      max-width: 100%;
    }
    .tab-content.active {
      opacity: 1;
      visibility: visible;
    }

    /* Terminal code display */
    .terminal-code {
      background: #1a1a1a;
      border-radius: 8px;
      padding: 30px;
      font-family: 'Courier New', monospace;
      font-size: 14px;
      line-height: 1.8;
      color: #e0e0e0;
      overflow-x: auto;
      margin-bottom: 20px;
      min-height: 500px;
      white-space: pre;
      width: 100%;
      max-width: 100%;
      box-sizing: border-box;
    }
    .terminal-code .comment {
      color: #666;
    }
    .terminal-code .keyword {
      color: #f92672;
    }
    .terminal-code .type {
      color: #66d9ef;
    }
    .terminal-code .string {
      color: #a6e22e;
    }
    .terminal-code .property {
      color: #e0e0e0;
    }

    .github-activity {
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid #e0e0e0;
    }
    .github-activity h2 {
      font-size: 14px;
      font-weight: normal;
      color: #666;
      margin-bottom: 12px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }
    .activity-list {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    .activity-item {
      font-size: 14px;
      color: #666;
      margin-bottom: 12px;
      line-height: 1.5;
    }
    .activity-detail {
      font-size: 13px;
      color: #999;
      margin-top: 3px;
      font-style: italic;
    }
    .activity-item a {
      color: #333;
      text-decoration: none;
    }
    .activity-item a:hover {
      text-decoration: underline;
    }
    .activity-type {
      color: #999;
      font-size: 12px;
    }

    /* Dark mode toggle */
    .theme-toggle {
      position: fixed;
      bottom: 35px;
      left: 20px;
      border: none;
      background: none;
      cursor: pointer;
      padding: 0;
      transition: all 0.3s ease;
      z-index: 1001;
    }
    .theme-toggle:hover {
      opacity: 0.6;
    }
    .theme-toggle svg {
      width: 18px;
      height: 18px;
      fill: #333;
    }

    /* Terminal status bar */
    .terminal-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: #1a1a1a;
      color: #00ff00;
      font-family: 'Courier New', monospace;
      font-size: 12px;
      padding: 6px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-top: 1px solid #333;
      z-index: 1000;
    }
    .terminal-bar-left, .terminal-bar-right {
      display: flex;
      gap: 20px;
      align-items: center;
    }
    .terminal-segment {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .terminal-prompt {
      color: #00ff00;
    }
    .terminal-path {
      color: #66d9ef;
    }
    .terminal-branch {
      color: #f92672;
    }
    .terminal-status {
      color: #a6e22e;
    }
    .terminal-time {
      color: #999;
    }
    body.dark-mode .terminal-bar {
      background: #0a0a0a;
      border-top-color: #222;
    }
    /* Dark mode styles */
    body.dark-mode {
      background: #1a1a1a;
      color: #e0e0e0;
    }
    body.dark-mode .content {
      color: #e0e0e0;
    }
    body.dark-mode h1 {
      color: #ffffff;
    }
    body.dark-mode p {
      color: #b0b0b0;
    }
    body.dark-mode a {
      color: #ffffff;
    }
    body.dark-mode .social-links a {
      color: #e0e0e0;
    }
    body.dark-mode .social-links svg {
      fill: #e0e0e0;
    }
    body.dark-mode .github-activity {
      border-top-color: #333;
    }
    body.dark-mode .github-activity h2 {
      color: #999;
    }
    body.dark-mode .activity-item {
      color: #999;
    }
    body.dark-mode .activity-item a {
      color: #e0e0e0;
    }
    body.dark-mode .activity-detail {
      color: #666;
    }
    body.dark-mode .theme-toggle svg {
      fill: #e0e0e0;
    }
    body.dark-mode .motion-container svg .tracer {
      fill: #8888dd;
    }
    body.dark-mode .motion-container svg path:not(#motion-path) {
      stroke: #333333;
    }
    body.dark-mode .tab-nav {
      border-bottom-color: #333;
    }
    body.dark-mode .tab-button {
      color: #999;
    }
    body.dark-mode .tab-button:hover {
      color: #e0e0e0;
    }
    body.dark-mode .tab-button.active {
      color: #e0e0e0;
      border-bottom-color: #e0e0e0;
    }
    body.dark-mode .terminal-code {
      background: #0a0a0a;
    }
    body.dark-mode .content-header {
      background: #1a1a1a;
    }

    /* Motion path container */
    .motion-container {
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      z-index: 2;
    }
    .motion-container svg {
      width: 400px;
      height: 400px;
      overflow: visible;
    }
    #diamond-group {
      transform-origin: 200px 200px;
    }
    .tracer, .additional-tracer {
      will-change: transform;
    }
    #particle-canvas {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
    }
    .conversion-counter {
      position: absolute;
      bottom: 40px;
      right: 20px;
      font-family: 'Courier New', monospace;
      font-size: 11px;
      color: #999;
      z-index: 10;
    }
    .conversion-counter .counter-value {
      color: #9999ff;
      font-weight: 500;
    }
    body.dark-mode .conversion-counter {
      color: #666;
    }
    body.dark-mode .conversion-counter .counter-value {
      color: #9999ff;
    }
    body.dark-mode .animation-panel {
      background: #0a0a0a;
    }

    /* Projects styles */
    .projects-header {
      margin-bottom: 24px;
    }
    .projects-header p {
      font-size: 14px;
      color: #666;
      margin: 0;
      line-height: 1.5;
    }
    .projects-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 16px;
      padding: 4px;
      padding-bottom: 40px;
    }
    .project-card {
      background: #f9f9f9;
      border: 1px solid #e0e0e0;
      border-left: 3px solid #9999ff;
      border-radius: 8px;
      padding: 28px 28px 24px;
      display: flex;
      flex-direction: column;
      gap: 16px;
      transition: border-color 0.2s ease, box-shadow 0.2s ease, border-left-color 0.2s ease;
      cursor: pointer;
      text-decoration: none;
      color: inherit;
    }
    .project-card:hover {
      border-color: #999;
      border-left-color: #7777dd;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    }
    .project-card:hover .project-arrow {
      transform: translateX(4px);
      color: #7777dd;
    }
    .project-card:focus {
      outline: 2px solid #333;
      outline-offset: 2px;
    }
    .project-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
    }
    .project-card-title {
      font-size: 16px;
      font-weight: 600;
      color: #333;
      margin: 0;
    }
    .project-arrow {
      color: #bbb;
      font-size: 16px;
      transition: transform 0.2s ease, color 0.2s ease;
      flex-shrink: 0;
    }
    .project-desc {
      font-size: 14px;
      color: #555;
      margin: 0;
      line-height: 1.6;
      padding-right: 8px;
    }
    .project-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 8px;
      padding-top: 16px;
      border-top: 1px solid #e8e8e8;
    }
    .project-tag {
      font-size: 11px;
      font-family: 'Courier New', monospace;
      color: #666;
      background: #efefef;
      padding: 4px 10px;
      border-radius: 4px;
    }

    /* Dark mode for projects */
    body.dark-mode .projects-header p {
      color: #999;
    }
    body.dark-mode .project-card {
      background: #1a1a1a;
      border-color: #333;
      border-left-color: #7777bb;
    }
    body.dark-mode .project-card:hover {
      border-color: #555;
      border-left-color: #9999ff;
      box-shadow: 0 4px 12px rgba(0,0,0,0.4);
    }
    body.dark-mode .project-card:hover .project-arrow {
      color: #9999ff;
    }
    body.dark-mode .project-card:focus {
      outline-color: #e0e0e0;
    }
    body.dark-mode .project-card-title {
      color: #e0e0e0;
    }
    body.dark-mode .project-arrow {
      color: #555;
    }
    body.dark-mode .project-desc {
      color: #999;
    }
    body.dark-mode .project-tags {
      border-top-color: #333;
    }
    body.dark-mode .project-tag {
      background: #252525;
      color: #888;
    }

    /* ================================
       RESPONSIVE STYLES - Must be last
       ================================ */
    @media (max-width: 1024px) {
      body {
        flex-direction: column;
        height: auto;
        overflow-x: hidden;
        overflow-y: auto;
      }
      .content {
        flex: none;
        order: 2;
        width: 100%;
        overflow: visible;
      }
      .content-inner {
        width: 100%;
        max-width: 100%;
        margin: 0;
        padding: 30px 20px 80px 20px;
        height: auto;
        box-sizing: border-box;
      }
      .content-header {
        position: static;
        background: white;
      }
      body.dark-mode .content-header {
        background: #1a1a1a;
      }
      .tab-content-wrapper {
        position: relative;
        flex: none;
      }
      .tab-content {
        position: relative;
        top: auto;
        left: auto;
        right: auto;
        opacity: 0;
        visibility: hidden;
        height: 0;
        overflow: hidden;
        display: block;
      }
      .tab-content.active {
        opacity: 1;
        visibility: visible;
        height: auto;
        overflow: visible;
      }
      .animation-panel {
        flex: none;
        order: 1;
        min-height: 280px;
        height: 280px;
        position: relative;
        width: 100%;
      }
      .motion-container svg {
        width: 220px;
        height: 220px;
      }
      .conversion-counter {
        bottom: 10px;
        right: 10px;
        font-size: 10px;
      }
    }
    @media (max-width: 768px) {
      .terminal-bar {
        font-size: 10px;
        padding: 6px 12px;
        flex-wrap: wrap;
        gap: 4px;
      }
      .terminal-bar-left, .terminal-bar-right {
        gap: 8px;
      }
      .terminal-bar-right .terminal-segment:last-child {
        display: none;
      }
    }
    @media (max-width: 480px) {
      .terminal-bar {
        font-size: 9px;
        padding: 8px 10px;
        justify-content: center;
      }
      .terminal-bar-left {
        width: 100%;
        justify-content: center;
      }
      .terminal-bar-right {
        display: none;
      }
    }
  </style>
</head>
<body>
  <!-- Terminal status bar -->
  <div class="terminal-bar">
    <div class="terminal-bar-left">
      <div class="terminal-segment">
        <span class="terminal-prompt">$</span>
        <span class="terminal-path">~/robert-laurella</span>
        <span class="terminal-branch">[main]</span>
      </div>
      <div class="terminal-segment">
        <span class="terminal-status">‚úì synced</span>
      </div>
    </div>
    <div class="terminal-bar-right">
      <div class="terminal-segment">
        <span class="terminal-time" id="terminal-time"></span>
      </div>
      <div class="terminal-segment">
        <span style="color: #999;">press</span>
        <span style="color: #f92672;">'d'</span>
        <span style="color: #999;">for dark mode</span>
      </div>
    </div>
  </div>

  <!-- Dark mode toggle -->
  <button class="theme-toggle" id="theme-toggle" aria-label="Toggle dark mode">
    <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
      <path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/>
    </svg>
    <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" style="display: none;">
      <path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999 0 0 0 4 12z"/>
    </svg>
  </button>

  <div class="content">
    <div class="content-inner">
      <div class="content-header">
        <h1>Robert Laurella</h1>

        <!-- Tab Navigation -->
        <div class="tab-nav">
          <button class="tab-button active" data-tab="home">Home</button>
          <button class="tab-button" data-tab="about">About</button>
          <button class="tab-button" data-tab="projects">Projects</button>
        </div>
      </div>

      <div class="tab-content-wrapper">
        <!-- Home Tab -->
        <div class="tab-content active" id="home-tab">
        <p>Hi! I'm Robert, Director of Product Marketing at <a href=https://botpress.com>Botpress</a>, an artificial intelligence startup.

<br><br>

I hold a PhD in English from the University of Oxford, an MA from the University of Toronto, and a BA (hons.) from McGill University. In my work, I use the skills I developed throughout my academic career to translate complex engineering into thoughtful product marketing initiatives and go-to-market strategies.
</p>

        <div class="social-links">
          <a href="https://www.linkedin.com/in/robertlaurella/" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
            </svg>
          </a>

          <a href="https://github.com/LaurellaRobert" target="_blank" rel="noopener noreferrer" aria-label="GitHub">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
            </svg>
          </a>
        </div>

        <div class="github-activity">
          <h2>Recent GitHub Activity</h2>
          <ul class="activity-list" id="github-activity">
            <li class="activity-item">Loading...</li>
          </ul>
        </div>
      </div>

        <!-- About Tab -->
        <div class="tab-content" id="about-tab">
          <div class="terminal-code">
<span class="comment">// robertLaurella.ts</span>
<span class="keyword">interface</span> <span class="type">Skills</span> {
  <span class="property">productMarketing</span>: <span class="type">string</span>[];
  <span class="property">technical</span>: <span class="type">string</span>[];
  <span class="property">interests</span>: <span class="type">string</span>[];
}
<span class="keyword">const</span> <span class="property">robertLaurella</span>: <span class="type">Skills</span> = {

  <span class="property">productMarketing</span>: [
    <span class="string">"Go-to-market strategy"</span>,
    <span class="string">"Product positioning"</span>,
    <span class="string">"Developer relations"</span>,
  ],
  <span class="property">technical</span>: [
    <span class="string">"LLM orchestration & agent workflows"</span>,
    <span class="string">"Web app & live service management"</span>,
    <span class="string">"TypeScript/JavaScript"</span>,
  ],
  <span class="property">interests</span>: [
    <span class="string">"Building good software"</span>,
    <span class="string">"MMORPGs"</span>,
    <span class="string">"Technical storytelling"</span>
  ]
};
<span class="keyword">export default</span> robertLaurella;
          </div>
        </div>

        <!-- Projects Tab -->
        <div class="tab-content" id="projects-tab">
          <div class="projects-header">
            <p>Small apps to test ideas and sharpen implementation.</p>
          </div>
          <div class="projects-grid">

            <a href="https://shouldihaveacupof.coffee/" target="_blank" rel="noopener noreferrer" class="project-card">
              <div class="project-header">
                <h3 class="project-card-title">Should I Have a Cup of Coffee?</h3>
                <span class="project-arrow">‚Üí</span>
              </div>
              <p class="project-desc">A site with more engineering than it needs: a zero-dependency experiment in canvas pixel detection, procedural particle systems, and parallax animation, built to see how far browser fundamentals can go.</p>
              <div class="project-tags">
                <span class="project-tag">LocalStorage</span>
                <span class="project-tag">Canvas API</span>
                <span class="project-tag">CSS Animations</span>
                <span class="project-tag">requestAnimationFrame</span>
                <span class="project-tag">Procedural Animation</span>
                <span class="project-tag">Pixel Manipulation</span>
              </div>
            </a>

          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="animation-panel">
    <div class="conversion-counter" id="conversion-counter">
      <span class="counter-value">0</span> captured
    </div>
    <canvas id="particle-canvas"></canvas>
    <div class="motion-container">
      <svg viewBox="0 0 400 400" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <!-- Glow filter for tracers -->
          <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
            <feMerge>
              <feMergeNode in="coloredBlur"/>
              <feMergeNode in="coloredBlur"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>

          <!-- Stronger glow for the diamond path -->
          <filter id="path-glow" x="-50%" y="-50%" width="200%" height="200%">
            <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
            <feMerge>
              <feMergeNode in="coloredBlur"/>
              <feMergeNode in="SourceGraphic"/>
            </feMerge>
          </filter>

          <!-- Animated gradient for color cycling -->
          <linearGradient id="rainbow-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop id="grad-stop-0" offset="0%" style="stop-color:#9999ff;stop-opacity:1" />
            <stop id="grad-stop-1" offset="25%" style="stop-color:#ff99cc;stop-opacity:1" />
            <stop id="grad-stop-2" offset="50%" style="stop-color:#ffcc99;stop-opacity:1" />
            <stop id="grad-stop-3" offset="75%" style="stop-color:#99ffcc;stop-opacity:1" />
            <stop id="grad-stop-4" offset="100%" style="stop-color:#9999ff;stop-opacity:1" />
          </linearGradient>
        </defs>

        <!-- Container for breathing animation -->
        <g id="diamond-group" transform-origin="200 200">
          <!-- Base grey diamond (always visible) -->
          <path
            d="M 200 50 Q 210 140, 320 200 Q 210 260, 200 350 Q 190 260, 80 200 Q 190 140, 200 50 Z"
            stroke="#cccccc"
            stroke-width="3"
            fill="none"
            opacity="0.3"/>

          <!-- Colored diamond that gets revealed -->
          <path id="motion-path"
            d="M 200 50 Q 210 140, 320 200 Q 210 260, 200 350 Q 190 260, 80 200 Q 190 140, 200 50 Z"
            stroke="url(#rainbow-gradient)"
            stroke-width="3"
            fill="none"
            opacity="0.8"
            filter="url(#path-glow)"/>
        </g>

        <!-- Trail container (trails rendered here) -->
        <g id="trail-container"></g>

        <!-- The tracer element -->
        <circle class="tracer" cx="0" cy="0" r="6" fill="#9999ff"/>
      </svg>
    </div>
  </div>

    <script>
      // Fetch GitHub activity
      async function loadGitHubActivity() {
        const GITHUB_TOKEN = '';

        try {
          const headers = {};
          if (GITHUB_TOKEN) {
            headers['Authorization'] = `token ${GITHUB_TOKEN}`;
          }

          const response = await fetch('https://api.github.com/users/LaurellaRobert/events/public?per_page=5', { headers });

          // Check for rate limiting
          if (!response.ok) {
            if (response.status === 403) {
              document.getElementById('github-activity').innerHTML = '<li class="activity-item">GitHub API rate limit reached. Try again later.</li>';
              return;
            }
            throw new Error(`HTTP error! status: ${response.status}`);
          }

          const events = await response.json();

          // Build all activity items in memory first
          const activityItems = [];

          for (const event of events.slice(0, 5)) {
            const repoName = event.repo.name.split('/')[1];
            const repoUrl = `https://github.com/${event.repo.name}`;

            let description = '';

            switch(event.type) {
              case 'PushEvent':
                description = `Pushed to <a href="${repoUrl}" target="_blank">${repoName}</a>`;

                // Fetch commit details using the compare API
                if (event.payload.before && event.payload.head) {
                  try {
                    const compareUrl = `https://api.github.com/repos/${event.repo.name}/compare/${event.payload.before}...${event.payload.head}`;
                    const compareResponse = await fetch(compareUrl, { headers });
                    const compareData = await compareResponse.json();

                    if (compareData.commits && compareData.commits.length > 0) {
                      const commitCount = compareData.commits.length;
                      description = `Pushed ${commitCount} commit${commitCount > 1 ? 's' : ''} to <a href="${repoUrl}" target="_blank">${repoName}</a>`;

                      // Show up to 3 commit messages
                      const commits = compareData.commits.slice(0, 3);
                      const commitDetails = commits.map(commit => {
                        const msg = commit.commit.message.split('\n')[0]; // First line only
                        return msg;
                      }).join('<br>');

                      if (commitDetails) {
                        description += `<div class="activity-detail">${commitDetails}</div>`;
                      }
                    }
                  } catch (err) {
                    // If fetching commits fails, just show the basic push message
                    console.warn('Failed to fetch commit details:', err);
                  }
                }
                break;
              case 'CreateEvent':
                description = `Created ${event.payload.ref_type} in <a href="${repoUrl}" target="_blank">${repoName}</a>`;
                break;
              case 'PullRequestEvent':
                if (event.payload.pull_request) {
                  const action = event.payload.action;
                  const prTitle = event.payload.pull_request.title;
                  const prUrl = event.payload.pull_request.html_url;
                  description = `${action.charAt(0).toUpperCase() + action.slice(1)} PR in <a href="${repoUrl}" target="_blank">${repoName}</a>: <a href="${prUrl}" target="_blank">"${prTitle}"</a>`;

                  // Add PR description if available
                  const prBody = event.payload.pull_request.body;
                  if (prBody && prBody.trim().length > 0) {
                    const truncatedBody = prBody.length > 150 ? prBody.substring(0, 150) + '...' : prBody;
                    description += `<div class="activity-detail">${truncatedBody}</div>`;
                  }
                } else {
                  description = `PR activity in <a href="${repoUrl}" target="_blank">${repoName}</a>`;
                }
                break;
              case 'IssuesEvent':
                if (event.payload.issue) {
                  const issueAction = event.payload.action;
                  const issueTitle = event.payload.issue.title;
                  const issueUrl = event.payload.issue.html_url;
                  description = `${issueAction.charAt(0).toUpperCase() + issueAction.slice(1)} issue in <a href="${repoUrl}" target="_blank">${repoName}</a>: <a href="${issueUrl}" target="_blank">"${issueTitle}"</a>`;

                  // Add issue description if available
                  const issueBody = event.payload.issue.body;
                  if (issueBody && issueBody.trim().length > 0) {
                    const truncatedBody = issueBody.length > 150 ? issueBody.substring(0, 150) + '...' : issueBody;
                    description += `<div class="activity-detail">${truncatedBody}</div>`;
                  }
                } else {
                  description = `Issue activity in <a href="${repoUrl}" target="_blank">${repoName}</a>`;
                }
                break;
              case 'WatchEvent':
                description = `Starred <a href="${repoUrl}" target="_blank">${repoName}</a>`;
                break;
              case 'ForkEvent':
                description = `Forked <a href="${repoUrl}" target="_blank">${repoName}</a>`;
                break;
              default:
                description = `Activity in <a href="${repoUrl}" target="_blank">${repoName}</a>`;
            }

            activityItems.push(`<li class="activity-item">${description}</li>`);
          }

          // Update DOM all at once
          const activityList = document.getElementById('github-activity');
          activityList.innerHTML = activityItems.join('');
        } catch (error) {
          console.error('Failed to load GitHub activity:', error);
          document.getElementById('github-activity').innerHTML = '<li class="activity-item">Unable to load activity</li>';
        }
      }

      // Load activity when page loads
      loadGitHubActivity();
    </script>

    <script>
      // Tab switching
      const tabButtons = document.querySelectorAll('.tab-button');
      const tabContents = document.querySelectorAll('.tab-content');

      tabButtons.forEach(button => {
        button.addEventListener('click', () => {
          const targetTab = button.getAttribute('data-tab');

          // Remove active class from all buttons and contents
          tabButtons.forEach(btn => btn.classList.remove('active'));
          tabContents.forEach(content => content.classList.remove('active'));

          // Add active class to clicked button and corresponding content
          button.classList.add('active');
          document.getElementById(`${targetTab}-tab`).classList.add('active');
        });
      });
    </script>

    <script>
      // Console easter egg for the curious
      console.log('%c\n' +
        '  ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó\n' +
        '  ‚ïë                                                                               ‚ïë\n' +
        '  ‚ïë   ____        _               _     _                        _ _             ‚ïë\n' +
        '  ‚ïë  |  _ \\ ___  | |__   ___ _ __| |_  | |    __ _ _   _ _ __ ___| | | __ _     ‚ïë\n' +
        '  ‚ïë  | |_) / _ \\ | \'_ \\ / _ \\ \'__| __| | |   / _` | | | | \'__/ _ \\ | |/ _` |    ‚ïë\n' +
        '  ‚ïë  |  _ < (_) || |_) |  __/ |  | |_  | |__| (_| | |_| | | |  __/ | | (_| |    ‚ïë\n' +
        '  ‚ïë  |_| \\_\\___/ |_.__/ \\___|_|   \\__| |_____\\__,_|\\__,_|_|  \\___|_|_|\\__,_|    ‚ïë\n' +
        '  ‚ïë                                                                               ‚ïë\n' +
        '  ‚ïë  üëã Hello, fellow developer!                                                 ‚ïë\n' +
        '  ‚ïë                                                                               ‚ïë\n' +
        '  ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù\n',
        'font-family: monospace; color: #9999ff; font-size: 12px; line-height: 1.2;'
      );
      console.log('%cIf you\'re reading this, you\'re probably the kind of person I want to talk to.', 'font-size: 14px; color: #666; font-weight: bold;');
      console.log('%c\nüìö PhD in English ‚Üí üìà Product Marketing ‚Üí üíª Still shipping code', 'font-size: 13px; color: #999; font-style: italic;');
      console.log('%c\nüõ†Ô∏è  Tech Stack: Vanilla JS + anime.js v4 (SVG motion paths), GitHub API, deployed on Pages.', 'font-size: 12px; color: #999;');
      console.log('%c\n‚å®Ô∏è  Interactive Easter Eggs:', 'font-size: 12px; color: #9999ff; font-weight: bold;');
      console.log('%c   ‚Ä¢ Press "d" to toggle dark mode', 'font-size: 11px; color: #666;');
      console.log('%c   ‚Ä¢ Click the diamond animation to spawn colorful tracers (max 10)', 'font-size: 11px; color: #666;');
      console.log('%c   ‚Ä¢ Check out the terminal status bar at the bottom', 'font-size: 11px; color: #666;');
      console.log('%c\nüí¨ Let\'s chat: robert.laurella@gmail.com or DM me on LinkedIn', 'font-size: 13px; color: #333; font-weight: bold;');
      console.log('%c\nüí° "The best products come from people who can speak both languages: engineering and human."', 'font-size: 12px; color: #999; font-style: italic;');
    </script>

    <script>
      // Terminal status bar - Update time
      function updateTerminalTime() {
        const now = new Date();
        const timeString = now.toLocaleTimeString('en-US', {
          hour: '2-digit',
          minute: '2-digit',
          hour12: false
        });
        document.getElementById('terminal-time').textContent = `${timeString} Montreal`;
      }
      updateTerminalTime();
      setInterval(updateTerminalTime, 1000);
    </script>

    <script>
      // Dark mode toggle
      const themeToggle = document.getElementById('theme-toggle');
      const sunIcon = document.querySelector('.sun-icon');
      const moonIcon = document.querySelector('.moon-icon');

      // Check for saved theme preference or default to light mode
      const currentTheme = localStorage.getItem('theme') || 'light';

      if (currentTheme === 'dark') {
        document.body.classList.add('dark-mode');
        sunIcon.style.display = 'none';
        moonIcon.style.display = 'block';
      }

      // Function to toggle dark mode
      function toggleDarkMode() {
        document.body.classList.toggle('dark-mode');

        if (document.body.classList.contains('dark-mode')) {
          localStorage.setItem('theme', 'dark');
          sunIcon.style.display = 'none';
          moonIcon.style.display = 'block';
        } else {
          localStorage.setItem('theme', 'light');
          sunIcon.style.display = 'block';
          moonIcon.style.display = 'none';
        }
      }

      // Button click handler
      themeToggle.addEventListener('click', toggleDarkMode);

      // Keyboard shortcut: Press 'd' to toggle dark mode
      document.addEventListener('keydown', (e) => {
        // Only trigger if not typing in an input/textarea
        if (e.key === 'd' && !['INPUT', 'TEXTAREA'].includes(e.target.tagName)) {
          toggleDarkMode();
          console.log('üåì Dark mode toggled via keyboard shortcut');
        }
      });
    </script>

    <!-- Anime.js v4 -->
    <script type="module">
      import { animate, svg, utils, createTimer } from 'https://cdn.jsdelivr.net/npm/animejs@4.3.5/+esm';

      // Get the path length
      const path = document.querySelector('#motion-path');
      const pathLength = path.getTotalLength();
      const svgElement = document.querySelector('.motion-container svg');
      const animationPanel = document.querySelector('.animation-panel');
      const trailContainer = document.querySelector('#trail-container');
      const mainTracer = document.querySelector('.tracer');

      // Set up stroke-dasharray and initial dashoffset
      path.style.strokeDasharray = pathLength;
      path.style.strokeDashoffset = pathLength;

      // ========================================
      // 1. COLOR CYCLING - Slow gradient shift
      // ========================================
      const gradientColors = [
        ['#9999ff', '#ff99cc', '#ffcc99', '#99ffcc', '#9999ff'],
        ['#ff99cc', '#ffcc99', '#99ffcc', '#9999ff', '#ff99cc'],
        ['#ffcc99', '#99ffcc', '#9999ff', '#ff99cc', '#ffcc99'],
        ['#99ffcc', '#9999ff', '#ff99cc', '#ffcc99', '#99ffcc'],
      ];

      let colorPhase = 0;
      function cycleColors() {
        const stops = document.querySelectorAll('[id^="grad-stop-"]');
        const currentColors = gradientColors[Math.floor(colorPhase) % gradientColors.length];
        const nextColors = gradientColors[Math.floor(colorPhase + 1) % gradientColors.length];
        const blend = colorPhase % 1;

        stops.forEach((stop, i) => {
          const current = currentColors[i];
          const next = nextColors[i];
          // Simple color interpolation
          const blended = blendColors(current, next, blend);
          stop.style.stopColor = blended;
        });

        colorPhase += 0.002; // Slow cycle
        requestAnimationFrame(cycleColors);
      }

      function blendColors(c1, c2, t) {
        const r1 = parseInt(c1.slice(1, 3), 16);
        const g1 = parseInt(c1.slice(3, 5), 16);
        const b1 = parseInt(c1.slice(5, 7), 16);
        const r2 = parseInt(c2.slice(1, 3), 16);
        const g2 = parseInt(c2.slice(3, 5), 16);
        const b2 = parseInt(c2.slice(5, 7), 16);
        const r = Math.round(r1 + (r2 - r1) * t);
        const g = Math.round(g1 + (g2 - g1) * t);
        const b = Math.round(b1 + (b2 - b1) * t);
        return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;
      }

      cycleColors();

      // ========================================
      // 2. BREATHING - Subtle scale pulse
      // ========================================
      animate('#diamond-group', {
        scale: [1, 1.02, 1],
        duration: 4000,
        ease: 'easeInOutSine',
        loop: true
      });

      // ========================================
      // 3. TRACER TRAILS - Fading comet tails
      // ========================================
      const trails = [];
      const maxTrailLength = 12;
      const trailInterval = 50; // ms between trail dots

      function createTrailDot(x, y, color, size = 4) {
        const dot = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
        dot.setAttribute('cx', x);
        dot.setAttribute('cy', y);
        dot.setAttribute('r', size);
        dot.setAttribute('fill', color);
        dot.setAttribute('opacity', '0.6');
        trailContainer.appendChild(dot);
        return dot;
      }

      // Trail system for main tracer
      let lastTrailTime = 0;
      const mainTrail = [];

      function updateMainTrail() {
        const now = Date.now();
        if (now - lastTrailTime > trailInterval) {
          const transform = mainTracer.getAttribute('transform');
          if (transform) {
            const match = transform.match(/translate\(([^,]+),\s*([^)]+)\)/);
            if (match) {
              const x = parseFloat(match[1]);
              const y = parseFloat(match[2]);
              const dot = createTrailDot(x, y, '#9999ff', 4);
              mainTrail.push({ element: dot, opacity: 0.6 });

              // Limit trail length
              if (mainTrail.length > maxTrailLength) {
                const old = mainTrail.shift();
                old.element.remove();
              }
            }
          }
          lastTrailTime = now;
        }

        // Fade out trail dots
        mainTrail.forEach((dot, i) => {
          const targetOpacity = (i / mainTrail.length) * 0.5;
          dot.element.setAttribute('opacity', targetOpacity);
          const scale = 0.3 + (i / mainTrail.length) * 0.7;
          dot.element.setAttribute('r', 4 * scale);
        });

        requestAnimationFrame(updateMainTrail);
      }

      updateMainTrail();

      // ========================================
      // ADDITIONAL TRACERS with trails
      // ========================================
      const additionalTracers = [];
      const maxTracers = 10;
      const tracerColors = ['#9999ff', '#ff99cc', '#ffcc99', '#99ffcc', '#cc99ff', '#99ccff'];

      function createTracer(delay = 0) {
        const color = tracerColors[Math.floor(Math.random() * tracerColors.length)];
        const tracer = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
        tracer.setAttribute('class', 'additional-tracer');
        tracer.setAttribute('r', 5);
        tracer.setAttribute('fill', color);
        tracer.setAttribute('opacity', 0.9);
        svgElement.appendChild(tracer);

        const tracerTrail = [];
        let tracerLastTrailTime = 0;

        // Trail update for this tracer
        const trailUpdater = () => {
          const now = Date.now();
          if (now - tracerLastTrailTime > trailInterval) {
            const transform = tracer.getAttribute('transform');
            if (transform) {
              const match = transform.match(/translate\(([^,]+),\s*([^)]+)\)/);
              if (match) {
                const x = parseFloat(match[1]);
                const y = parseFloat(match[2]);
                const dot = createTrailDot(x, y, color, 3);
                tracerTrail.push({ element: dot, opacity: 0.5 });

                if (tracerTrail.length > 8) {
                  const old = tracerTrail.shift();
                  old.element.remove();
                }
              }
            }
            tracerLastTrailTime = now;
          }

          // Fade trail
          tracerTrail.forEach((dot, i) => {
            const targetOpacity = (i / tracerTrail.length) * 0.4;
            dot.element.setAttribute('opacity', targetOpacity);
            const scale = 0.3 + (i / tracerTrail.length) * 0.7;
            dot.element.setAttribute('r', 3 * scale);
          });
        };

        const animation = animate(tracer, {
          ease: 'linear',
          duration: 8000,
          loop: true,
          delay: delay,
          ...svg.createMotionPath('#motion-path')
        });

        const trailIntervalId = setInterval(trailUpdater, 16);

        additionalTracers.push({
          element: tracer,
          animation: animation,
          color: color,
          trail: tracerTrail,
          trailIntervalId: trailIntervalId,
          createdAt: Date.now()
        });

        // Auto-remove after 15 seconds
        setTimeout(() => {
          const index = additionalTracers.findIndex(t => t.element === tracer);
          if (index !== -1) {
            const t = additionalTracers[index];
            clearInterval(t.trailIntervalId);
            t.animation.pause();
            t.trail.forEach(dot => dot.element.remove());
            tracer.remove();
            additionalTracers.splice(index, 1);
          }
        }, 15000);
      }

      // Expose createTracer for particle-to-tracer conversion
      window.createDiamondTracer = createTracer;

      // Click to add tracers
      animationPanel.addEventListener('click', (e) => {
        if (additionalTracers.length < maxTracers) {
          createTracer(0);
          console.log('‚ú® Tracer spawned! Click to add more (max 10)');
        } else {
          console.log('‚ö†Ô∏è Max tracers reached (10)');
        }
      });

      // Animate main tracer along the motion path
      animate('.tracer', {
        ease: 'linear',
        duration: 8000,
        loop: true,
        ...svg.createMotionPath('#motion-path')
      });

      // Create reveal and erase effect
      animate('#motion-path', {
        strokeDashoffset: [
          { to: 0, duration: 8000, ease: 'linear' },
          { to: -pathLength, duration: 8000, ease: 'linear' }
        ],
        loop: true
      });
    </script>

    <script>
      // Particle Network Animation
      const canvas = document.getElementById('particle-canvas');
      const ctx = canvas.getContext('2d');
      const particlePanel = document.querySelector('.animation-panel');
      const diamondPath = document.querySelector('#motion-path');
      const svg = document.querySelector('.motion-container svg');

      let particles = [];
      let mouse = { x: null, y: null, radius: 150 };

      // Get SVG viewBox dimensions for coordinate conversion
      const viewBox = svg.viewBox.baseVal;
      const svgWidth = viewBox.width;
      const svgHeight = viewBox.height;

      // Resize canvas
      function resizeCanvas() {
        canvas.width = particlePanel.offsetWidth;
        canvas.height = particlePanel.offsetHeight;
      }
      resizeCanvas();
      window.addEventListener('resize', resizeCanvas);

      // Particle colors matching gradient
      const colors = ['#9999ff', '#ff99cc', '#ffcc99', '#99ffcc', '#cc99ff', '#99ccff'];

      // Conversion counter
      let conversionCount = 0;
      const counterElement = document.getElementById('conversion-counter');
      const counterValue = counterElement.querySelector('.counter-value');

      function updateConversionCounter() {
        conversionCount++;
        counterValue.textContent = conversionCount;
      }

      // Conversion effect particles
      let conversionEffects = [];

      class ConversionEffect {
        constructor(x, y) {
          this.x = x;
          this.y = y;
          this.particles = [];

          // Create burst particles
          for (let i = 0; i < 12; i++) {
            const angle = (Math.PI * 2 * i) / 12;
            this.particles.push({
              x: x,
              y: y,
              vx: Math.cos(angle) * 3,
              vy: Math.sin(angle) * 3,
              life: 1.0,
              color: colors[Math.floor(Math.random() * colors.length)]
            });
          }
        }

        update() {
          this.particles.forEach(p => {
            p.x += p.vx;
            p.y += p.vy;
            p.vx *= 0.95;
            p.vy *= 0.95;
            p.life -= 0.05;
          });
          return this.particles.some(p => p.life > 0);
        }

        draw() {
          this.particles.forEach(p => {
            if (p.life > 0) {
              ctx.beginPath();
              ctx.arc(p.x, p.y, 2, 0, Math.PI * 2);
              ctx.fillStyle = p.color.replace(')', `, ${p.life})`).replace('rgb', 'rgba');
              ctx.fill();
            }
          });
        }
      }

      // Particle class
      class Particle {
        constructor() {
          this.x = Math.random() * canvas.width;
          this.y = Math.random() * canvas.height;
          this.vx = (Math.random() - 0.5) * 0.5;
          this.vy = (Math.random() - 0.5) * 0.5;
          this.radius = Math.random() * 2 + 1;
          this.color = colors[Math.floor(Math.random() * colors.length)];
          this.locked = false;
        }

        update() {
          let shouldConvert = false;

          // Mouse interaction
          if (mouse.x !== null && mouse.y !== null) {
            const dx = mouse.x - this.x;
            const dy = mouse.y - this.y;
            const distance = Math.sqrt(dx * dx + dy * dy);

            if (distance < mouse.radius || this.locked) {
              this.locked = true; // Lock particle to cursor

              // Always attract locked particles toward cursor
              const angle = Math.atan2(dy, dx);
              const attractionStrength = 0.15;
              this.vx += Math.cos(angle) * attractionStrength;
              this.vy += Math.sin(angle) * attractionStrength;

              // Check if particle is near the diamond path
              if (this.isNearDiamond()) {
                shouldConvert = true;
              }
            }
          } else {
            // Mouse left - unlock particle
            this.locked = false;
          }

          // Move particle
          this.x += this.vx;
          this.y += this.vy;

          // Damping
          this.vx *= 0.98;
          this.vy *= 0.98;

          // Bounce off edges
          if (this.x < 0 || this.x > canvas.width) this.vx *= -1;
          if (this.y < 0 || this.y > canvas.height) this.vy *= -1;

          // Keep in bounds
          this.x = Math.max(0, Math.min(canvas.width, this.x));
          this.y = Math.max(0, Math.min(canvas.height, this.y));

          return shouldConvert;
        }

        isNearDiamond() {
          // Convert canvas coordinates to SVG coordinates
          const svgRect = svg.getBoundingClientRect();
          const canvasRect = canvas.getBoundingClientRect();

          // Get position relative to SVG
          const relativeX = this.x + canvasRect.left - svgRect.left;
          const relativeY = this.y + canvasRect.top - svgRect.top;

          // Convert to SVG coordinate space
          const svgX = (relativeX / svgRect.width) * svgWidth;
          const svgY = (relativeY / svgRect.height) * svgHeight;

          // Check distance to path center (200, 200) with diamond bounds
          const centerX = 200;
          const centerY = 200;
          const distToCenter = Math.sqrt((svgX - centerX) ** 2 + (svgY - centerY) ** 2);

          // Diamond roughly spans 150 units from center - 2 unit tolerance
          return Math.abs(distToCenter - 150) < 2;
        }

        draw() {
          ctx.beginPath();
          ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
          ctx.fillStyle = this.color;
          ctx.fill();
        }
      }

      // Target particle count
      function getTargetParticleCount() {
        return Math.floor((canvas.width * canvas.height) / 15000);
      }

      // Initialize particles
      function initParticles() {
        particles = [];
        const particleCount = getTargetParticleCount();
        for (let i = 0; i < particleCount; i++) {
          particles.push(new Particle());
        }
      }
      initParticles();

      // Respawn particles from edges
      function spawnParticleFromEdge() {
        const particle = new Particle();
        // Spawn from a random edge
        const edge = Math.floor(Math.random() * 4);
        switch (edge) {
          case 0: // Top
            particle.x = Math.random() * canvas.width;
            particle.y = 0;
            particle.vy = Math.random() * 0.5 + 0.2;
            break;
          case 1: // Right
            particle.x = canvas.width;
            particle.y = Math.random() * canvas.height;
            particle.vx = -(Math.random() * 0.5 + 0.2);
            break;
          case 2: // Bottom
            particle.x = Math.random() * canvas.width;
            particle.y = canvas.height;
            particle.vy = -(Math.random() * 0.5 + 0.2);
            break;
          case 3: // Left
            particle.x = 0;
            particle.y = Math.random() * canvas.height;
            particle.vx = Math.random() * 0.5 + 0.2;
            break;
        }
        return particle;
      }

      // Respawn timing
      let lastRespawnTime = 0;
      const respawnInterval = 300; // ms between respawns

      // Connect particles
      function connectParticles() {
        for (let i = 0; i < particles.length; i++) {
          for (let j = i + 1; j < particles.length; j++) {
            const dx = particles[i].x - particles[j].x;
            const dy = particles[i].y - particles[j].y;
            const distance = Math.sqrt(dx * dx + dy * dy);

            if (distance < 120) {
              const opacity = 1 - (distance / 120);
              ctx.strokeStyle = `rgba(153, 153, 255, ${opacity * 0.3})`;
              ctx.lineWidth = 1;
              ctx.beginPath();
              ctx.moveTo(particles[i].x, particles[i].y);
              ctx.lineTo(particles[j].x, particles[j].y);
              ctx.stroke();
            }
          }

          // Connect to mouse
          if (mouse.x !== null && mouse.y !== null) {
            const dx = particles[i].x - mouse.x;
            const dy = particles[i].y - mouse.y;
            const distance = Math.sqrt(dx * dx + dy * dy);

            // Show connection if within radius OR if particle is locked
            if (distance < mouse.radius || particles[i].locked) {
              const opacity = particles[i].locked ? 0.7 : (1 - (distance / mouse.radius)) * 0.5;
              ctx.strokeStyle = `rgba(153, 153, 255, ${opacity})`;
              ctx.lineWidth = particles[i].locked ? 2.5 : 2;
              ctx.beginPath();
              ctx.moveTo(particles[i].x, particles[i].y);
              ctx.lineTo(mouse.x, mouse.y);
              ctx.stroke();
            }
          }
        }
      }

      // Animation loop
      function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // Respawn particles if below target count
        const now = Date.now();
        const targetCount = getTargetParticleCount();
        if (particles.length < targetCount && now - lastRespawnTime > respawnInterval) {
          particles.push(spawnParticleFromEdge());
          lastRespawnTime = now;
        }

        // Update particles and check for conversions
        particles = particles.filter(particle => {
          const shouldConvert = particle.update();

          if (shouldConvert) {
            // Create conversion effect
            conversionEffects.push(new ConversionEffect(particle.x, particle.y));

            // Convert particle to tracer
            if (window.createDiamondTracer) {
              window.createDiamondTracer(0);
              updateConversionCounter();
            }
            return false; // Remove this particle
          }

          particle.draw();
          return true; // Keep this particle
        });

        connectParticles();

        // Update and draw conversion effects
        conversionEffects = conversionEffects.filter(effect => {
          const isAlive = effect.update();
          effect.draw();
          return isAlive;
        });

        requestAnimationFrame(animate);
      }
      animate();

      // Mouse move event
      particlePanel.addEventListener('mousemove', (e) => {
        const rect = particlePanel.getBoundingClientRect();
        mouse.x = e.clientX - rect.left;
        mouse.y = e.clientY - rect.top;
      });

      particlePanel.addEventListener('mouseleave', () => {
        mouse.x = null;
        mouse.y = null;
      });

      // Reinitialize on resize
      window.addEventListener('resize', () => {
        resizeCanvas();
        initParticles();
      });
    </script>

  
    
</body>
</html>
